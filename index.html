<!-- FILE: index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SchoolBoard — Landing</title>
  <style>
    body{font-family:Inter,system-ui,Arial;margin:0;background:#0b1220;color:#e6eef6;display:flex;align-items:center;justify-content:center;height:100vh}
    .card{background:linear-gradient(180deg,#0f1724,#071028);padding:28px;border-radius:12px;max-width:420px;width:92%;text-align:center;box-shadow:0 12px 40px rgba(2,6,23,0.6)}
    button{padding:10px 14px;border-radius:10px;border:0;margin:8px;cursor:pointer;background:#4f46e5;color:white;font-weight:600}
    a.link{display:block;margin-top:12px;color:#9aa4b2}
  </style>
</head>
<body>
  <div class="card">
    <h1>SchoolBoard</h1>
    <p class="small">Choose how to sign in</p>
    <div>
      <button onclick="location.href='teacher-login.html'">Teacher Login / Signup</button>
      <button onclick="location.href='student-login.html'">Student Login</button>
    </div>
    <a class="link" href="https://discord.gg/" target="_blank">Join our Discord</a>
  </div>
</body>
</html>


<!-- FILE: teacher-login.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Teacher Login — SchoolBoard</title>
<style>
  body{font-family:Inter,system-ui,Arial;margin:0;background:#f6f8fb;color:#0b1220;display:flex;align-items:center;justify-content:center;height:100vh}
  .card{background:white;padding:22px;border-radius:12px;max-width:420px;width:94%;box-shadow:0 8px 30px rgba(11,92,255,0.06)}
  input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #e6eef6}
  button{padding:10px;border-radius:8px;border:0;background:#0b5cff;color:white;cursor:pointer}
  .muted{color:#64748b;font-size:13px}
</style>
</head>
<body>
  <div class="card">
    <h2>Teacher Login / Signup</h2>
    <div class="muted">Create an account or sign in</div>
    <input id="email" placeholder="email" />
    <input id="displayName" placeholder="display name" />
    <input id="password" type="password" placeholder="password" />
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="signupBtn">Create account</button>
      <button id="loginBtn">Sign in</button>
    </div>
    <div style="margin-top:10px"><button onclick="location.href='index.html'">Back</button></div>
    <div id="msg" class="muted"></div>
  </div>

  <!-- Firebase SDKs + App init -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js';
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js';
    import { getFirestore, doc, setDoc } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js';

    // Firebase config (your project)
    const firebaseConfig = {
      apiKey: "AIzaSyB0YOBZyhUHWGnXM9PegUzq7DMI3gFTyPI",
      authDomain: "schoolboard-lms-b5ec4.firebaseapp.com",
      projectId: "schoolboard-lms-b5ec4",
      storageBucket: "schoolboard-lms-b5ec4.firebasestorage.app",
      messagingSenderId: "118707864651",
      appId: "1:118707864651:web:75e6192ed7bee21c3979ce",
      measurementId: "G-9C4ECZN1EL"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const email = document.getElementById('email');
    const displayName = document.getElementById('displayName');
    const password = document.getElementById('password');
    const signupBtn = document.getElementById('signupBtn');
    const loginBtn = document.getElementById('loginBtn');
    const msg = document.getElementById('msg');

    signupBtn.addEventListener('click', async ()=>{
      msg.textContent = 'Creating account...';
      try{
        const userCred = await createUserWithEmailAndPassword(auth, email.value, password.value);
        await updateProfile(userCred.user, { displayName: displayName.value });
        // create teacher document
        await setDoc(doc(db, 'teachers', userCred.user.uid), { name: displayName.value || email.value, email: email.value, createdAt: new Date().toISOString() });
        msg.textContent = 'Teacher account created. Redirecting...';
        setTimeout(()=>location.href='teacher-dashboard.html',800);
      }catch(e){msg.textContent = e.message}
    });

    loginBtn.addEventListener('click', async ()=>{
      msg.textContent = 'Signing in...';
      try{
        await signInWithEmailAndPassword(auth, email.value, password.value);
        msg.textContent = 'Signed in. Redirecting...';
        setTimeout(()=>location.href='teacher-dashboard.html',600);
      }catch(e){msg.textContent = e.message}
    });
  </script>
</body>
</html>


<!-- FILE: student-login.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Student Login — SchoolBoard</title>
<style>
  body{font-family:Inter,system-ui,Arial;margin:0;background:#0b1220;color:#e6eef6;display:flex;align-items:center;justify-content:center;height:100vh}
  .card{background:linear-gradient(180deg,#0f1724,#071028);padding:22px;border-radius:12px;max-width:420px;width:94%;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
  input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
  button{padding:10px;border-radius:8px;border:0;background:#4f46e5;color:white;cursor:pointer}
  .muted{color:#9aa4b2;font-size:13px}
</style>
</head>
<body>
  <div class="card">
    <h2>Student Login</h2>
    <div class="muted">Teachers create student accounts — ask your teacher for credentials</div>
    <input id="sEmail" placeholder="email" />
    <input id="sPassword" type="password" placeholder="password" />
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="sLoginBtn">Sign in</button>
      <button onclick="location.href='index.html'">Back</button>
    </div>
    <div id="sMsg" class="muted"></div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js';
    import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js';

    const firebaseConfig = {
      apiKey: "AIzaSyB0YOBZyhUHWGnXM9PegUzq7DMI3gFTyPI",
      authDomain: "schoolboard-lms-b5ec4.firebaseapp.com",
      projectId: "schoolboard-lms-b5ec4",
      storageBucket: "schoolboard-lms-b5ec4.firebasestorage.app",
      messagingSenderId: "118707864651",
      appId: "1:118707864651:web:75e6192ed7bee21c3979ce",
      measurementId: "G-9C4ECZN1EL"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const sEmail = document.getElementById('sEmail');
    const sPassword = document.getElementById('sPassword');
    const sLoginBtn = document.getElementById('sLoginBtn');
    const sMsg = document.getElementById('sMsg');

    sLoginBtn.addEventListener('click', async ()=>{
      sMsg.textContent = 'Signing in...';
      try{
        await signInWithEmailAndPassword(auth, sEmail.value, sPassword.value);
        sMsg.textContent = 'Signed in. Redirecting...';
        setTimeout(()=>location.href='student-dashboard.html',600);
      }catch(e){sMsg.textContent = e.message}
    });
  </script>
</body>
</html>


<!-- FILE: teacher-dashboard.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Teacher Dashboard — SchoolBoard</title>
<style>
  body{font-family:Inter,system-ui,Arial;margin:0;background:#f6f8fb;color:#0b1220}
  header{padding:12px;background:white;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eef2ff}
  .container{max-width:1100px;margin:18px auto;padding:12px}
  .card{background:white;padding:12px;border-radius:10px;margin-bottom:12px}
  input,textarea,select{width:100%;padding:8px;margin:6px 0;border-radius:8px;border:1px solid #e6eef6}
  button{padding:8px 10px;border-radius:8px;border:0;background:#0b5cff;color:white;cursor:pointer}
  .cols{display:flex;gap:12px}
  .col{flex:1}
</style>
</head>
<body>
  <header>
    <div><strong>Teacher Dashboard</strong></div>
    <div>
      <button id="signOut">Sign out</button>
    </div>
  </header>
  <div class="container">
    <div class="cols">
      <div class="col">
        <div class="card">
          <h3>Create Student Account</h3>
          <input id="stName" placeholder="Student name" />
          <input id="stEmail" placeholder="Student email" />
          <input id="stPass" placeholder="Temporary password" />
          <button id="createStudent">Create Student</button>
          <div id="createMsg"></div>
        </div>

        <div class="card">
          <h3>Create Assignment</h3>
          <input id="asTitle" placeholder="Title" />
          <input id="asDue" placeholder="Due (YYYY-MM-DD)" />
          <textarea id="asDesc" placeholder="Description"></textarea>
          <button id="createAssign">Create Assignment</button>
          <div id="assignMsg"></div>
        </div>
      </div>

      <div class="col">
        <div class="card">
          <h3>Students</h3>
          <div id="studentsList">Loading...</div>
        </div>

        <div class="card">
          <h3>Assignments</h3>
          <div id="assignList">Loading...</div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js';
    import { getAuth, signOut, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js';
    import { getFirestore, doc, setDoc, collection, addDoc, onSnapshot, query } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyB0YOBZyhUHWGnXM9PegUzq7DMI3gFTyPI",
      authDomain: "schoolboard-lms-b5ec4.firebaseapp.com",
      projectId: "schoolboard-lms-b5ec4",
      storageBucket: "schoolboard-lms-b5ec4.firebasestorage.app",
      messagingSenderId: "118707864651",
      appId: "1:118707864651:web:75e6192ed7bee21c3979ce",
      measurementId: "G-9C4ECZN1EL"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const stName = document.getElementById('stName');
    const stEmail = document.getElementById('stEmail');
    const stPass = document.getElementById('stPass');
    const createStudentBtn = document.getElementById('createStudent');
    const createMsg = document.getElementById('createMsg');
    const studentsList = document.getElementById('studentsList');
    const createAssign = document.getElementById('createAssign');
    const asTitle = document.getElementById('asTitle');
    const asDue = document.getElementById('asDue');
    const asDesc = document.getElementById('asDesc');
    const assignMsg = document.getElementById('assignMsg');
    const assignList = document.getElementById('assignList');
    const signOutBtn = document.getElementById('signOut');

    let teacherUid = null;

    // require user to be logged in as teacher
    auth.onAuthStateChanged(async user => {
      if(!user){ location.href='teacher-login.html'; return }
      teacherUid = user.uid;
      // show students subcollection
      const studentsCol = collection(db, 'teachers', teacherUid, 'students');
      onSnapshot(studentsCol, snap=>{
        studentsList.innerHTML='';
        snap.forEach(d=>{ const data=d.data(); studentsList.innerHTML += `<div>${data.name} — ${data.email}</div>` });
      });

      const assignmentsCol = collection(db, 'teachers', teacherUid, 'assignments');
      onSnapshot(assignmentsCol, snap=>{
        assignList.innerHTML='';
        snap.forEach(d=>{ const data=d.data(); assignList.innerHTML += `<div><strong>${data.title}</strong> — due ${data.due}</div>`});
      });
    });

    // create student: creates auth user then student doc under teacher
    createStudentBtn.addEventListener('click', async ()=>{
      createMsg.textContent='Creating...';
      try{
        const cred = await createUserWithEmailAndPassword(auth, stEmail.value, stPass.value);
        // create student doc under teacher
        await setDoc(doc(db, 'teachers', teacherUid, 'students', cred.user.uid), { name: stName.value, email: stEmail.value, createdAt: new Date().toISOString() });
        createMsg.textContent='Student created';
        stName.value=''; stEmail.value=''; stPass.value='';
      }catch(e){ createMsg.textContent = e.message }
    });

    createAssign.addEventListener('click', async ()=>{
      assignMsg.textContent='Saving...';
      try{
        await addDoc(collection(db, 'teachers', teacherUid, 'assignments'), { title: asTitle.value, due: asDue.value, description: asDesc.value, createdAt: new Date().toISOString() });
        assignMsg.textContent='Assignment created'; asTitle.value=''; asDue.value=''; asDesc.value='';
      }catch(e){assignMsg.textContent=e.message}
    });

    signOutBtn.addEventListener('click', async ()=>{ await signOut(auth); location.href='teacher-login.html' });
  </script>
</body>
</html>


<!-- FILE: student-dashboard.html -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Student Dashboard — SchoolBoard</title>
<style>
  body{font-family:Inter,system-ui,Arial;margin:0;background:#0b1220;color:#e6eef6}
  header{padding:12px;background:linear-gradient(180deg,#071028,#071020);display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,0.03)}
  .container{max-width:1100px;margin:18px auto;padding:12px}
  .card{background:linear-gradient(180deg,#0f1724,#071028);padding:12px;border-radius:10px;margin-bottom:12px}
  button{padding:8px 10px;border-radius:8px;border:0;background:#4f46e5;color:white;cursor:pointer}
</style>
</head>
<body>
  <header>
    <div><strong>Student Dashboard</strong></div>
    <div><button id="sSignOut">Sign out</button></div>
  </header>
  <div class="container">
    <div class="card">
      <h3>Your Assignments</h3>
      <div id="sAssignList">Loading...</div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js';
    import { getAuth, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js';
    import { getFirestore, collectionGroup, onSnapshot } from 'https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyB0YOBZyhUHWGnXM9PegUzq7DMI3gFTyPI",
      authDomain: "schoolboard-lms-b5ec4.firebaseapp.com",
      projectId: "schoolboard-lms-b5ec4",
      storageBucket: "schoolboard-lms-b5ec4.firebasestorage.app",
      messagingSenderId: "118707864651",
      appId: "1:118707864651:web:75e6192ed7bee21c3979ce",
      measurementId: "G-9C4ECZN1EL"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const sAssignList = document.getElementById('sAssignList');
    const sSignOut = document.getElementById('sSignOut');

    onAuthStateChanged(auth, user => {
      if(!user) location.href='student-login.html';
      // show assignments across all teachers where assignments exist (collectionGroup)
      const q = collectionGroup(db, 'assignments');
      onSnapshot(q, snap=>{
        sAssignList.innerHTML = '';
        snap.forEach(d=>{ const data=d.data(); sAssignList.innerHTML += `<div><strong>${data.title}</strong> — due ${data.due}</div>` })
      })
    });

    sSignOut.addEventListener('click', async ()=>{ await signOut(auth); location.href='student-login.html' });
  </script>
</body>
</html>
